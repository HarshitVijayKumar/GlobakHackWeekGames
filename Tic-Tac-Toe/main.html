<!DOCTYPE html>
<head>
    <title>TIC-TAC-TOE</title>
    <link rel="icon" type="x-icon" href="x.png">
</head>
<body>
    <h1>TIC-TAC-TOE</h1>
    <hr>
    <br>
    <h4 style="text-align: center;">Select your player</h4>
    <button type="submit" onclick="selectImage('0.png','x.png')" style="float: left;"><img style="float: left;" src="0.png" width="5%" height="5%"></button>
    <button type="submit" onclick="selectImage('x.png','0.png')" style="float: right;"><img style="float: left;" src="x.png" width="8%" height="8%"></button>
    <br>
    <br>
    <table style="align-items: center;align-self: center">
        <tr>
            <th>
                <button type="button" onclick="move(0,0)">
                    <img id="0-0" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(0,1)">
                    <img id="0-1" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(0,2)">
                    <img id="0-2" src="rock.png" width="5%" height="5%">
                </button>
            </th>
        </tr>
        <tr>
            <th>
                <button type="button" onclick="move(1,0)">
                    <img id="1-0" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(1,1)">
                    <img id="1-1" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(1,2)">
                    <img id="1-2" src="rock.png" width="5%" height="5%">
                </button>
            </th>
        </tr>
        <tr>
            <th>
                <button type="button" onclick="move(2,0)">
                    <img id="2-0" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(2,1)">
                    <img id="2-1" src="rock.png" width="5%" height="5%">
                </button>
            </th>
            <th>
                <button type="button" onclick="move(2,2)">
                    <img id="2-2" src="rock.png" width="5%" height="5%">
                </button>
            </th>
        </tr>
    </table>
    <br>
    <br>
    <br>
    <br>
    <script>
        let matrix = [[-1,-1,-1],[-1,-1,-1],[-1,-1,-1]]
        let im = ["0.png","x.png"]
        let player = 0
        let over = false
        let tries = 0
        let valid = false
        function selectImage(x,y){
            if(valid===false){
                im[0] = x
                im[1] = y
                valid = true
            }
        }
        function move(x,y){
            if ((over===false)&&(matrix[x][y]===-1)){
                let image = document.getElementById(String(x)+"-"+String(y))
                if (tries%2===0){
                    image.src = im[0]
                    matrix[x][y] = 0
                }
                else{
                    image.src = im[1]
                    matrix[x][y] = 1
                }

                //Checking
                if (matrix[x][0]===matrix[x][1]&&matrix[x][1]===matrix[x][2]){
                    alert(player + ' Won !!')
                    over = true
                }
                if (matrix[0][y]===matrix[1][y]&&matrix[1][y]===matrix[2][y]){
                    alert(player + ' Won !!')
                    over = true
                }
                if (matrix[0][0]==matrix[1][1]&&matrix[1][1]==matrix[2][2]){
                    if ((matrix[0][0]!=-1)||(matrix[1][1]!=-1)||(matrix[2][2]!=-1)){
                        alert(player + ' Won !!')
                        over = true
                    }
                    
                }
                if (matrix[0][2]==matrix[1][1]&&matrix[1][1]==matrix[2][0]){
                    if ((matrix[0][2]!=-1)||(matrix[1][1]!=-1)||(matrix[0][2]!=-1)){
                        alert(player + ' Won !!')
                        over = true
                    }
                }
                if (tries%2==0){
                    player = 1
                }
                else{
                    player = 0
                }
                tries += 1
            }
            else if (matrix[x][y]!==-1){
                alert('Already Selected !!')
            }
        }
    </script>
</body>